<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
</head>
<link rel="stylesheet" media="screen" href="css/style.css">
<link rel="stylesheet" type="text/css" href="css/reset.css"/>
<body>
<div id="">
    <div class="login" style="background: lightyellow">
        <div class="login-top">
            登录
        </div>
        <div class="login-center clearfix">
            <div class="login-center-img"><img src="img/name.png"/></div>
            <div class="login-center-input">
                <input id="name" type="text" name="" value="" placeholder="请输入您的用户名" onfocus="this.placeholder=''" onblur="this.placeholder='请输入您的用户名'"/>
                <div class="login-center-input-text">用户名</div>
            </div>
        </div>
        <div class="login-center clearfix">
            <div class="login-center-img"><img src="img/password.png"/></div>
            <div class="login-center-input">
                <input id="pass" type="password" name=""value="" placeholder="请输入您的密码" onfocus="this.placeholder=''" onblur="this.placeholder='请输入您的密码'"/>
                <div class="login-center-input-text">密码</div>
            </div>
        </div>
        <div id = "denglu" class="login-button">
            登录
        </div>
    </div>
    <div class="sk-rotating-plane"></div>
</div>
<script type="text/javascript" src="/js/canvas-nest.min.js"></script>
<script src="/js/jquery-3.4.1.js"></script>
<script type="text/javascript">
    var userName ="";
    var password ="";

    $("#name").change(function () {
        userName = $("#name").val();
    });
    $("#pass").change(function () {
        password = $("#pass").val();
    });

    $('#denglu').click(function () {
        if(userName==""){
            alert("请输入用户名");
            return;
        }
        if(password==""){
            alert("请输入密码");
            return;
        }
        $.ajax({
            url:'/login/check',
            type:'POST',
            dataType:'JSON',
            data:{'userName':userName,'password':password},
            success:function (result) {
                if(result==1){
                    alert("登录成功");
                    location.href = "/index";
                }else{
                    alert("用户名密码错误");
                }
            },
            error:function (result) {
                console.log("请求失败");
            }
        });
    });

    $(function () {
        document.onkeydown = function (event) {
            var e = event || window.event || arguments.callee.caller.arguments[0];
            if (e && e.keyCode == 13) {
                if(userName==""){
                    alert("请输入用户名");
                    return;
                }
                if(password==""){
                    alert("请输入密码");
                    return;
                }
                $.ajax({
                    url:'/login/check',
                    type:'POST',
                    dataType:'JSON',
                    data:{'userName':userName,'password':password},
                    success:function (result) {
                        if(result==1){
                            alert("登录成功");
                            location.href = "/index";
                        }else{
                            alert("用户名密码错误");
                        }
                    },
                    error:function (result) {
                        console.log("请求失败");
                    }
                });
            }
        };
    });
</script>
</body>
</html>